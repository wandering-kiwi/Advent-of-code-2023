print(sum([val*[max(list(map(lambda x: int(x[0]), list(filter(lambda x: x[1] == 'blue', i))))) for i in [[[i[0], i[1].strip('\n')] for i in [k for sub in [[j[1:].split(' ') for j in i.split(',')] for i in txt.split(':')[1].split(';')] for k in sub]] for index, txt in enumerate(open('day2.txt', 'r'))]][ind]*[max(list(map(lambda x: int(x[0]), list(filter(lambda x: x[1] == 'green', i))))) for i in [[[i[0], i[1].strip('\n')] for i in [k for sub in [[j[1:].split(' ') for j in i.split(',')] for i in txt.split(':')[1].split(';')] for k in sub]] for index, txt in enumerate(open('day2.txt', 'r'))]][ind] for ind, val in enumerate([max(list(map(lambda x: int(x[0]), list(filter(lambda x: x[1] == 'red', i))))) for i in [[[i[0], i[1].strip('\n')] for i in [k for sub in [[j[1:].split(' ') for j in i.split(',')] for i in txt.split(':')[1].split(';')] for k in sub]] for index, txt in enumerate(open('day2.txt', 'r'))]])]))